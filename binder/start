#!/bin/bash

ipython profile create
echo "c.InteractiveShellApp.extensions.append('sparkmonitor.kernelextension')" >>  $(ipython profile locate default)/ipython_kernel_config.py

git clone https://github.com/chrispyl/binder_content.git
mv /home/jovyan/binder_content/datasets /home/jovyan/binder_content/notebooks /home/jovyan/
rm -rf binder_content

jupyter trust /home/jovyan/notebooks/setup.ipynb
jupyter trust /home/jovyan/notebooks/dummy.ipynb

jupyter nbconvert --to notebook --execute --inplace /home/jovyan/notebooks/setup.ipynb



wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz
tar -xvf openjdk-11+28_linux-x64_bin.tar.gz



ssh-keygen -t rsa -P '' -f /home/jovyan/id_rsa
wget https://dlcdn.apache.org/hadoop/common/hadoop-2.10.1/hadoop-2.10.1.tar.gz
tar -xvf hadoop-2.10.1.tar.gz

echo "export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")" >> /etc/profile.d/java_home.sh



exec "$@"
